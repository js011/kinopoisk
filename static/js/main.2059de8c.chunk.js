(this.webpackJsonpkinopoisk=this.webpackJsonpkinopoisk||[]).push([[0],{51:function(e,t,a){e.exports=a(83)},60:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"fetchAuth",(function(){return S})),a.d(n,"updateAuth",(function(){return T})),a.d(n,"onLogOut",(function(){return U})),a.d(n,"toggleUserModal",(function(){return R})),a.d(n,"toggleAuthFormModal",(function(){return P}));var r={};a.r(r),a.d(r,"fetchFavouriteMovies",(function(){return I})),a.d(r,"fetchWatchlist",(function(){return x})),a.d(r,"clearFavouriteMoviesAndWatchList",(function(){return L})),a.d(r,"updateFavouriteMovies",(function(){return H})),a.d(r,"updateWatchlist",(function(){return G}));var s={};a.r(s),a.d(s,"onChangeFilters",(function(){return D})),a.d(s,"onChangePage",(function(){return W})),a.d(s,"resetFilters",(function(){return V})),a.d(s,"onChangeTotalPages",(function(){return B}));var o=a(0),i=a.n(o),c=a(24),l=a.n(c),m=a(20),u=(a(60),a(13)),d=a(12),p=a(4),v=a(5),h=a(7),_=a(6),f=a(108),g=a(95),E=a(21),b=a(8),N=a(30),O=a.n(N),y="https://api.themoviedb.org/3",j="https://image.tmdb.org/t/p/w500",w="2bf9f43ff01f800a4b2838b95fcce99e",C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(a,n){fetch(e,t).then((function(e){if(e.status<400)return a(e.json());throw e})).catch((function(e){return e.json().then((function(e){return n(e)}))}))}))},k=function(e){Object(h.a)(a,e);var t=Object(_.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,null,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.params,n=Object(b.a)({api_key:w},a);return C("".concat(y).concat(e,"?").concat(O.a.stringify(n)),{mode:"cors",headers:{"Content-type":"application/json"}})}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.params,n=t.body,r=Object(b.a)({api_key:w},a);return C("".concat(y).concat(e,"?").concat(O.a.stringify(r)),{method:"POST",mode:"cors",headers:{"Content-type":"application/json"},body:JSON.stringify(n)})}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.params,n=t.body,r=Object(b.a)({api_key:w},a);return C("".concat(y).concat(e,"?").concat(O.a.stringify(r)),{method:"DELETE",mode:"cors",headers:{"Content-type":"application/json"},body:JSON.stringify(n)})}}]),a}(i.a.Component),A=a(10),M=a.n(A),F=a(15),S=function(e){return function(t){t({type:"FETCH_REQUEST_AUTH"}),k.get("/account",{params:{session_id:e,language:"ru-RU"}}).then((function(a){t(T({user:a,session_id:e}))})).catch((function(e){t({type:"FETCH_ERROR_AUTH",payload:e})}))}},T=function(e){return{type:"UPDATE_AUTH",payload:{user:e.user,session_id:e.session_id}}},U=function(){return{type:"LOGOUT"}},R=function(e){return{type:"TOGGLE_USER_MODAL",payload:e}},P=function(e){return{type:"TOGGLE_AUTH_FORM_MODAL",payload:e}},I=function(e,t){return function(a){a({type:"FETCH_REQUEST_FAVOURITE_MOVIES"}),k.get("/account/".concat(t,"/favorite/movies"),{params:{session_id:e,language:"ru-RU"}}).then((function(e){a({type:"FETCH_SUCCESS_FAVOURITE_MOVIES",payload:e})})).catch((function(e){a({type:"FETCH_ERROR_FAVOURITE_MOVIES",payload:e})}))}},x=function(e,t){return function(a){a({type:"FETCH_REQUEST_WATCHLIST"}),k.get("/account/".concat(t,"/watchlist/movies"),{params:{session_id:e,language:"ru-RU"}}).then((function(e){a({type:"FETCH_SUCCESS_WATCHLIST",payload:e})})).catch((function(e){a({type:"FETCH_ERROR_WATCHLIST",payload:e})}))}},L=function(){return{type:"CLEAR_FAVOURITE_MOVIES_AND_WATCHLIST"}},H=function(e){var t=e.account_id,a=e.session_id,n=e.media_id;return function(e,r){for(var s=!0,o=0;o<r().movies.favouriteMovies.length;o++)Number(r().movies.favouriteMovies[o].id)===Number(n)&&(s=!1);k.post("/account/".concat(t,"/favorite"),{params:{session_id:a,language:"ru-RU"},body:{media_type:"movie",media_id:n,favorite:s}}).then((function(){return k.get("/account/".concat(t,"/favorite/movies"),{params:{session_id:a,language:"ru-RU"}}).then((function(t){e({type:"UPDATE_SUCCESS_FAVOURITE_MOVIES",payload:t})}))})).catch((function(){e({type:"UPDATE_ERROR_FAVOURITE_MOVIES"})}))}},G=function(e){var t=e.account_id,a=e.session_id,n=e.media_id;return function(e,r){for(var s=!0,o=0;o<r().movies.watchlist.length;o++)Number(r().movies.watchlist[o].id)===Number(n)&&(s=!1);k.post("/account/".concat(t,"/watchlist"),{params:{session_id:a,language:"ru-RU"},body:{media_type:"movie",media_id:n,watchlist:s}}).then((function(){return k.get("/account/".concat(t,"/watchlist/movies"),{params:{session_id:a,language:"ru-RU"}}).then((function(t){e({type:"UPDATE_SUCCESS_WATCHLIST",payload:t})}))})).catch((function(){e({type:"UPDATE_ERROR_WATCHLIST"})}))}},D=function(e){var t=e.target;return{type:"ONCHANGE_FILTERS",payload:{name:t.name,value:t.value}}},W=function(e){return{type:"ONCHANGE_PAGE",payload:e}},V=function(){return{type:"RESET_FILTERS"}},B=function(e){return{type:"ONCHANGE_TOTAL_PAGES",payload:e}},q=function(e){return{auth:e.auth,movies:e.movies,filters:e.filters}},z=function(e){return{authActions:Object(F.bindActionCreators)(n,e),moviesActions:Object(F.bindActionCreators)(r,e),filtersActions:Object(F.bindActionCreators)(s,e)}},J=function(e){return Object(m.b)(q,z)(function(t){Object(h.a)(n,t);var a=Object(_.a)(n);function n(){return Object(p.a)(this,n),a.apply(this,arguments)}return Object(v.a)(n,[{key:"render",value:function(){return i.a.createElement(e,this.props)}}]),n}(i.a.Component))},Q=a(29),Y=new Q.a,K=J(function(e){Object(h.a)(a,e);var t=Object(_.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).getUser=function(){var t=e.props,a=t.authActions,n=t.moviesActions;e.setState({submitting:!0}),k.get("/authentication/token/new").then((function(t){return k.post("/authentication/token/validate_with_login",{body:{username:e.state.username,password:e.state.password,request_token:t.request_token}})})).then((function(e){return k.post("/authentication/session/new",{body:{request_token:e.request_token}})})).then((function(e){return Y.set("session_id",e.session_id,{path:"/kinopoisk/",maxAge:2592e3}),k.get("/account",{params:{session_id:e.session_id}})})).then((function(t){e.setState({submitting:!1},(function(){a.updateAuth({user:t,session_id:Y.get("session_id")}),n.fetchFavouriteMovies({session_id:Y.get("session_id"),account_id:t.id}),n.fetchWatchlist({session_id:Y.get("session_id"),account_id:t.id})}))})).catch((function(t){e.setState((function(e){return{errors:Object(b.a)(Object(b.a)({},e.errors),{},{base:t.status_message}),submitting:!1}}))}))},e.validateFields=function(){var t={};return e.state.username.length<5&&(t.username="\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d, \u043c\u0438\u043d\u0438\u043c\u0443\u043c 5 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439"),e.state.password.length<6&&(t.password="\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c, \u043c\u0438\u043d\u0438\u043c\u0443\u043c 6 \u0437\u0430\u0447\u0435\u043d\u0438\u0439"),e.state.password!==e.state.repeatPassword&&(t.repeatPassword="\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0438\u0434\u0435\u043d\u0442\u0438\u0447\u043d\u044b"),t},e.onChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){var t,a;return a={},Object(E.a)(a,n,r),Object(E.a)(a,"errors",Object(b.a)(Object(b.a)({},e.errors),{},(t={},Object(E.a)(t,n,null),Object(E.a)(t,"base",null),t))),a}))},e.handleBlur=function(t){var a=t.target.name,n=e.validateFields(),r=n[a];Object.keys(n).length>0&&e.setState((function(e){return{errors:Object(b.a)(Object(b.a)({},e.errors),{},Object(E.a)({},a,r))}}))},e.onSubmit=function(t){t.preventDefault();var a=e.validateFields();Object.keys(a).length>0?e.setState({errors:Object(b.a)({},a)}):e.getUser()},e.getClassForInpur=function(t){return M()("form-control",{invalid:e.state.errors[t]})},e.state={username:"user_kinopoisk",password:"user_1234",repeatPassword:"user_1234",submitting:!1,errors:{}},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.password,n=e.repeatPassword,r=e.submitting,s=e.errors;return i.a.createElement("form",{className:"form-group login-form container pl-4 pr-4",onSubmit:this.onSubmit},i.a.createElement("div",{className:"login-form__title"},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),i.a.createElement("label",{htmlFor:"username"},"\u041b\u043e\u0433\u0438\u043d:"),i.a.createElement("input",{className:this.getClassForInpur("username"),type:"text",placeholder:"\u041b\u043e\u0433\u0438\u043d",id:"username",name:"username",value:t,onChange:this.onChange,onBlur:this.handleBlur}),s.username&&i.a.createElement("div",{className:"invalid-feedback pl-2"},s.username),i.a.createElement("label",{htmlFor:"password",className:"mt-2"},"\u041f\u0430\u0440\u043e\u043b\u044c:"),i.a.createElement("input",{className:this.getClassForInpur("password"),type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",id:"password",name:"password",value:a,onChange:this.onChange,onBlur:this.handleBlur}),s.password&&i.a.createElement("div",{className:"invalid-feedback pl-2"},s.password),i.a.createElement("label",{htmlFor:"repeatPassword",className:"mt-2"},"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c:"),i.a.createElement("input",{className:this.getClassForInpur("repeatPassword"),type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",id:"repeatPassword",name:"repeatPassword",value:n,onChange:this.onChange,onBlur:this.handleBlur}),s.repeatPassword&&i.a.createElement("div",{className:"invalid-feedback pl-2"},s.repeatPassword),i.a.createElement("button",{type:"submit",className:"btn btn-success text-center col-12 mt-4 pb-2",disabled:r},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"),i.a.createElement("div",{className:"invalid-feedback pl-2 mt-2 text-center"},s.base))}}]),a}(i.a.Component)),X=function(e){Object(h.a)(a,e);var t=Object(_.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).toggleModal=function(){var t=e.props,a=t.showAuthFormModal;(0,t.toggleAuthFormModal)(!a)},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props.showAuthFormModal;return i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{className:"btn btn-outline-warning",type:"button",onClick:this.toggleModal},"\u0412\u043e\u0439\u0442\u0438"),i.a.createElement("button",{className:"ml-2 btn btn-outline-warning",type:"button"},i.a.createElement("a",{href:"https://www.themoviedb.org/signup",target:"_blank",rel:"noopener noreferrer"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")),i.a.createElement(f.a,{isOpen:e,toggle:this.toggleModal},i.a.createElement(g.a,null,i.a.createElement(K,null))))}}]),a}(i.a.Component),Z=function(e){Object(h.a)(a,e);var t=Object(_.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).toggleShow=function(){var t=e.props,a=t.auth;t.authActions.toggleUserModal(!a.showUserModal)},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props.auth;return i.a.createElement(i.a.Fragment,null,this.props.render(this.toggleShow),i.a.createElement("div",{className:"dropdown__wrapper"},e.showUserModal&&i.a.createElement("div",{className:"dropdown__popover",style:Object(b.a)({},this.props.position)},i.a.createElement("div",{className:"dropdown__cover",onClick:this.toggleShow}),i.a.createElement("div",{className:"dropdown__wrapper-content"},this.props.children(this.toggleShow)))))}}]),a}(i.a.Component);Z.defaultProps={position:{top:"auto",right:"auto",bottom:"auto",left:"auto"}};var $=J(function(e){Object(h.a)(a,e);var t=Object(_.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).handleLogOut=function(){var t=e.props,a=t.auth,n=t.authActions,r=t.moviesActions;k.delete("/authentication/session",{body:{session_id:a.session_id}}).then((function(){n.onLogOut(),r.clearFavouriteMoviesAndWatchList()}))},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this,t=this.props.auth.user;return i.a.createElement("div",{className:"user"},i.a.createElement("div",{className:"dropdown"},i.a.createElement(Z,Object.assign({render:function(e){return i.a.createElement("img",{className:"user-img rounded-circle",src:"https://image.tmdb.org/t/p/w500".concat(t.avatar.tmdb.avatar_path)||!1,alt:"",onClick:e})},position:{right:"2.5px",top:"50px"}},this.props),(function(){return i.a.createElement("div",{className:"dropdown__menu"},i.a.createElement("div",{className:"dropdown__menu-item user-name"},t.name||t.username,i.a.createElement(u.b,{to:"/profile/".concat(t.id)},i.a.createElement("p",{className:"user-name__sub-title"},"\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c"))),i.a.createElement("div",{className:"dropdown__menu-item"},i.a.createElement(u.b,{to:"/",onClick:e.handleLogOut},"\u0412\u044b\u0439\u0442\u0438")))}))))}}]),a}(i.a.Component)),ee=J(function(e){Object(h.a)(a,e);var t=Object(_.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props,t=e.auth,a=e.authActions;return i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"pt-2 pb-2 row col-12"},i.a.createElement("div",{className:"title col-4"},i.a.createElement("p",{className:"title__name"},i.a.createElement(u.b,{to:"/"},"Kino",i.a.createElement("span",{className:"title__sub-name"},"poisk")),i.a.createElement("span",{className:"ml-2 with-TMDB-Api"},i.a.createElement("a",{href:"https://www.themoviedb.org/",target:"_blank",rel:"noopener noreferrer"},"with TMDB Api")))),i.a.createElement("div",{className:"search col-6"}),i.a.createElement("div",{className:"login col-2"},t.user?i.a.createElement($,null):i.a.createElement(X,{showAuthFormModal:t.showAuthFormModal,toggleAuthFormModal:a.toggleAuthFormModal}))))}}]),a}(i.a.Component)),te=function(e){Object(h.a)(a,e);var t=Object(_.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props,t=e.sort_by,a=e.onChangeFilters,n=e.sortByOptions;return i.a.createElement("select",{className:"form-control",name:"sort_by",id:"sort_by",value:t,onChange:a},n.map((function(e){return i.a.createElement("option",{key:e.value,value:e.value},e.label)})))}}]),a}(i.a.PureComponent);te.defaultProps={sortByOptions:[{label:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 (\u0443\u0431\u044b\u0432\u0430\u043d\u0438\u0435)",value:"popularity.desc"},{label:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 (\u0432\u043e\u0437\u0440\u043e\u0441\u0442\u0430\u043d\u0438\u0435)",value:"popularity.asc"},{label:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 (\u0443\u0431\u044b\u0432\u0430\u043d\u0438\u0435)",value:"vote_average.desc"},{label:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 (\u0432\u043e\u0437\u0440\u043e\u0441\u0442\u0430\u043d\u0438\u0435)",value:"vote_average.asc"}]};var ae=J(function(e){Object(h.a)(a,e);var t=Object(_.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props,t=e.onChangePage,a=e.page,n=e.total_pages;return i.a.createElement("div",{className:"pagination form-group row col-12"},i.a.createElement("button",{type:"button",className:"btn btn-light col-4",onClick:function(){return t(a-1)},disabled:1===a},"\u041d\u0430\u0437\u0430\u0434"),i.a.createElement("div",{className:"col-4 total-pages"},"".concat(a," \u0438\u0437 ").concat(n)),i.a.createElement("button",{type:"button",className:"btn btn-light col-4",onClick:function(){return t(a+1)},disabled:a===Number(n)},"\u0412\u043f\u0435\u0440\u0435\u0434"))}}]),a}(i.a.Component)),ne=function(){var e=(new Date).getFullYear();return Array.from(new Array(70),(function(t,a){return e-a}))}(),re=function(e){Object(h.a)(a,e);var t=Object(_.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props,t=e.primary_release_year,a=e.onChangeFilters;return i.a.createElement(i.a.Fragment,null,i.a.createElement("label",{className:"filters-label primary-release-year",htmlFor:"primary_release_year"},"\u0414\u0430\u0442\u0430 \u0432\u044b\u0445\u043e\u0434\u0430"),i.a.createElement("select",{className:"form-control",name:"primary_release_year",id:"primary_release_year",value:t,onChange:a},ne.map((function(e){return i.a.createElement("option",{key:e,value:e},e)}))))}}]),a}(i.a.Component),se=a(49),oe=function(e){var t=e.with_genres,a=e.allGenres,n=e.onChangeGenres;return i.a.createElement(i.a.Fragment,null,i.a.createElement("label",{className:"filters-label genre-label",htmlFor:"with_genres"},"\u0416\u0430\u043d\u0440\u044b"),i.a.createElement("div",{className:"genres",id:"with_genres"},a.map((function(e){return i.a.createElement("div",{className:"genres__item",key:e.id},i.a.createElement("input",{type:"checkbox",value:e.id,checked:-1!==t.indexOf(String(e.id)),className:"genres__item__checkbox",name:"with_genres",id:e.id,onChange:n}),i.a.createElement("label",{className:"genres__item__label",htmlFor:e.id},e.name))}))))};oe.defaultProps={allGenres:[]};var ie=oe,ce=function(e){Object(h.a)(a,e);var t=Object(_.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).onChangeGenres=function(t){var a=t.target,n=a.name,r=a.value,s=e.props,o=s.onChangeFilters,i=s.with_genres;o({target:-1===i.indexOf(String(r))?{name:n,value:[].concat(Object(se.a)(i),[r])}:{name:n,value:i.filter((function(e){return e!==r}))}})},e.state={allGenres:[]},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this,t="https://api.themoviedb.org/3/genre/movie/list?api_key=".concat(w,"&language=ru-RU");return fetch(t).then((function(e){return e.json()})).then((function(t){e.setState({allGenres:t.genres})}))}},{key:"render",value:function(){return i.a.createElement(ie,{with_genres:this.props.with_genres,allGenres:this.state.allGenres,onChangeGenres:this.onChangeGenres})}}]),a}(i.a.PureComponent),le=function(e){return{filters:e.filters}},me=function(e){return{filtersActions:Object(F.bindActionCreators)(s,e)}},ue=function(e){return Object(m.b)(le,me)(function(t){Object(h.a)(n,t);var a=Object(_.a)(n);function n(){return Object(p.a)(this,n),a.apply(this,arguments)}return Object(v.a)(n,[{key:"render",value:function(){return i.a.createElement(e,this.props)}}]),n}(i.a.Component))},de=ue(function(e){Object(h.a)(a,e);var t=Object(_.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props,t=e.filters,a=e.filtersActions;return i.a.createElement(i.a.Fragment,null,i.a.createElement("form",{className:"mb-3"},i.a.createElement("div",{className:"sort form-group"},i.a.createElement("label",{className:"filters-label",htmlFor:"sort_by"},"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),i.a.createElement(te,{sort_by:t.sort_by,onChangeFilters:a.onChangeFilters})),i.a.createElement(ae,{total_pages:t.total_pages,onChangePage:a.onChangePage,page:t.page}),i.a.createElement("div",{className:"sort form-group mt-3"},i.a.createElement("label",{className:"filters-label",htmlFor:"sort_by"},"\u0424\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c"),i.a.createElement(re,{primary_release_year:t.primary_release_year,onChangeFilters:a.onChangeFilters}),i.a.createElement(ce,{with_genres:t.with_genres,onChangeFilters:a.onChangeFilters}),i.a.createElement("button",{onClick:a.resetFilters,className:"btn btn-light col-12 mt-2",type:"button",style:{background:"#e2e6ea"}},"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u044b"))))}}]),a}(i.a.Component)),pe=a(96),ve=a(97),he=a(98),_e=a(99),fe=a(100),ge=[{month:"01",shortName:"\u044f\u043d\u0432",fullName:"\u044f\u043d\u0432\u0430\u0440\u044c"},{month:"02",shortName:"\u0444\u0435\u0432",fullName:"\u0444\u0435\u0432\u0440\u0430\u043b\u044c"},{month:"03",shortName:"\u043c\u0430\u0440",fullName:"\u043c\u0430\u0440\u0442"},{month:"04",shortName:"\u0430\u043f\u0440",fullName:"\u0430\u043f\u0440\u0435\u043b\u044c"},{month:"05",shortName:"\u043c\u0430\u0439",fullName:"\u043c\u0430\u0439"},{month:"06",shortName:"\u0438\u044e\u043d",fullName:"\u0438\u044e\u043d\u044c"},{month:"07",shortName:"\u0438\u044e\u043b",fullName:"\u0438\u044e\u043b\u044c"},{month:"08",shortName:"\u0430\u0432\u0433",fullName:"\u0430\u0432\u0433\u0443\u0441\u0442"},{month:"09",shortName:"\u0441\u0435\u043d",fullName:"\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c"},{month:"10",shortName:"\u043e\u043a\u0442",fullName:"\u043e\u043a\u0442\u044f\u0431\u0440\u044c"},{month:"11",shortName:"\u043d\u043e\u044f",fullName:"\u043d\u043e\u044f\u0431\u0440\u044c"},{month:"12",shortName:"\u0434\u0435\u043a",fullName:"\u0434\u0435\u043a\u0430\u0431\u0440\u044c"}],Ee=J(function(e){Object(h.a)(a,e);var t=Object(_.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).getMonthNameOnMonthNumber=function(){var t=e.props.movie;return ge.filter((function(e){return e.month===t.release_date.substr(5,2)}))},e.toogleMovieModal=function(){var t=e.props,a=t.auth,n=t.authActions;a.session_id?e.setState((function(e){return{showMovieModal:!e.showMovieModal}})):n.toggleAuthFormModal(!0)},e.updateFavouriteMovies=function(){var t=e.props,a=t.movie,n=t.auth;t.moviesActions.updateFavouriteMovies({account_id:n.account_id,session_id:n.session_id,media_id:a.id}),e.toogleMovieModal()},e.updateWatchlist=function(){var t=e.props,a=t.movie,n=t.auth;t.moviesActions.updateWatchlist({account_id:n.account_id,session_id:n.session_id,media_id:a.id}),e.toogleMovieModal()},e.isFavourite=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=e.props.movie;return-1!==t.findIndex((function(e){return e.id===a.id}))},e.state={showMovieModal:!1,favourite:!1},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props,t=e.movie,a=e.movies,n="".concat(t.release_date.substr(8,2)," ").concat(this.getMonthNameOnMonthNumber()[0].shortName," ").concat(t.release_date.substr(0,4));return i.a.createElement("div",{className:"movie-card"},i.a.createElement(u.b,{to:"/movie/".concat(t.id,"/media/")},i.a.createElement("img",{className:"movie-card__img",src:t.poster_path?"".concat(j).concat(t.poster_path):"/kinopoisk/images/not-foundPoster.png",alt:""})),i.a.createElement("div",{className:"movie-card__desc"},i.a.createElement("p",{className:"movie-card__desc__vote-average"},1===String(t.vote_average).length?"".concat(t.vote_average,".0"):t.vote_average),i.a.createElement("p",{className:"movie-card__desc__title"},i.a.createElement(u.b,{to:"/movie/".concat(t.id)},t.title)),i.a.createElement("p",{className:"movie-card__desc__release-date"},n)),i.a.createElement("div",{className:"movie-settings"},i.a.createElement("div",{className:"movie-settings__wrapper"},i.a.createElement("div",{className:"more-horiz"},i.a.createElement(pe.a,{className:"more-horiz__icon",onClick:this.toogleMovieModal})),this.state.showMovieModal&&i.a.createElement("div",{className:"settings-menu"},i.a.createElement("div",{className:"favourite-movie settings-menuItem",onClick:this.updateFavouriteMovies},this.isFavourite(a.favouriteMovies)?i.a.createElement(ve.a,null):i.a.createElement(he.a,null),i.a.createElement("span",{className:"settings-title"},"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435")),i.a.createElement("div",{className:"willWatch-movie settings-menuItem",onClick:this.updateWatchlist},this.isFavourite(a.watchlist)?i.a.createElement(_e.a,null):i.a.createElement(fe.a,null),i.a.createElement("span",{className:"settings-title"},"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c"))))))}}]),a}(i.a.PureComponent)),be=a(32),Ne=a.n(be),Oe=function(e){Object(h.a)(a,e);var t=Object(_.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,this.props.movies.map((function(t){return i.a.createElement(Ee,{movie:t,favouriteMovies:e.props.favouriteMovies,watchList:e.props.watchList,key:t.id})})))}}]),a}(i.a.PureComponent);Oe.defaultProps={movies:[]};var ye,je=(ye=Oe,function(e){Object(h.a)(a,e);var t=Object(_.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).getMovies=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t.sort_by,r=t.primary_release_year,s=t.with_genres,o=e.props.onChangeTotalPages,i={language:"ru-RU",sort_by:n,page:a,primary_release_year:r,with_genres:s.join(",")};return k.get("/discover/movie",{params:i}).then((function(t){o(t.total_pages),e.setState({movies:t.results})}))},e.state={movies:[]},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.filters,a=e.page;this.getMovies(t,a)}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.onChangePage,n=t.filters,r=t.page;Ne.a.isEqual(e.filters.sort_by,n.sort_by)&&Ne.a.isEqual(e.filters.primary_release_year,n.primary_release_year)&&Ne.a.isEqual(e.filters.with_genres,n.with_genres)||(a(1),this.getMovies(n)),e.page!==r&&this.getMovies(n,r)}},{key:"render",value:function(){var e=this.state,t=e.movies,a=e.favouriteMovies,n=e.watchList;return i.a.createElement(ye,{account_id:this.props.account_id,session_id:this.props.session_id,movies:t,favouriteMovies:a,watchList:n})}}]),a}(i.a.PureComponent)),we=ue(function(e){Object(h.a)(a,e);var t=Object(_.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props,t=e.filters,a=e.filtersActions;return i.a.createElement("div",{className:"main container"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"filters col-3"},i.a.createElement(de,null)),i.a.createElement("div",{className:"movies col-9"},i.a.createElement(je,{filters:t,page:t.page,onChangePage:a.onChangePage,onChangeTotalPages:a.onChangeTotalPages}))))}}]),a}(i.a.Component)),Ce=a(101),ke=a(102),Ae=a(103),Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return e.forEach((function(e){t.push(e.name)})),t},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return-1!==e.findIndex((function(e){return e.id===t.id}))},Se=function(e){if(!e.backdrop_path)return"/kinopoisk/images/not-found-backdrop.jpg";var t=e.belongs_to_collection?e.belongs_to_collection.backdrop_path:e.backdrop_path;return"https://image.tmdb.org/t/p/w1920_and_h800_multi_faces".concat(t)},Te=function(e){var t=e.movie,a=e.movies,n=e.moviesActions,r=e.auth,s=e.authActions;return i.a.createElement("div",{className:"movie-header"},i.a.createElement("div",{className:"movie-header__custom-bg text-right"},i.a.createElement("img",{src:Se(t),alt:"",height:"512",className:"movie-header__bg-img"})),i.a.createElement("div",{className:"movie-header__single-column"},i.a.createElement("div",{className:"movie-header__content-wrapper h-100"},i.a.createElement("div",{className:"container h-100"},i.a.createElement("div",{className:"row h-100"},i.a.createElement("div",{className:"col-4 pr-0 d-flex align-items-center h-100"},i.a.createElement("img",{src:t.poster_path?"".concat(j).concat(t.poster_path):"/kinopoisk/images/not-foundPoster.png",width:"290",height:"435",alt:"",className:"movie-header__poster-img rounded-lg"})),i.a.createElement("div",{className:"col-8 pl-0 text-left d-flex justify-content-center flex-column h-100"},i.a.createElement("div",{className:"movie-header__description"},i.a.createElement("h2",{className:"movie-header__title mb-0"},t.title," ( ",t.original_title," )"),i.a.createElement("p",{className:"movie-header__tagline mb-0"},t.tagline),i.a.createElement("div",{className:"d-flex align-items-center mt-3 mb-3"},i.a.createElement("div",{className:"d-flex align-items-center"},i.a.createElement("div",{className:"movie-header__rate d-flex justify-content-center align-items-center rounded-circle"},1===String(t.vote_average).length?"".concat(t.vote_average,".0"):t.vote_average),i.a.createElement("p",{className:"mb-0 pl-3",style:{lineHeight:"18px"}},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 ",i.a.createElement("br",null)," \u0441\u0447\u0451\u0442")),i.a.createElement("div",{className:"d-flex align-items-center"},i.a.createElement("div",{className:"ml-4 movie-header__favourite cursor-pointer d-flex justify-content-center align-items-center rounded-circle",onClick:function(){r.user?n.updateFavouriteMovies({account_id:r.account_id,session_id:r.session_id,media_id:t.id}):s.toggleAuthFormModal(!0)}},Fe(a.favouriteMovies,t)?i.a.createElement(ve.a,null):i.a.createElement(he.a,null)),i.a.createElement("div",{className:"ml-2 movie-header__watchlist cursor-pointer d-flex justify-content-center align-items-center rounded-circle",onClick:function(){r.user?n.updateWatchlist({account_id:r.account_id,session_id:r.session_id,media_id:t.id}):s.toggleAuthFormModal(!0)}},Fe(a.watchlist,t)?i.a.createElement(_e.a,null):i.a.createElement(fe.a,null)))),i.a.createElement("p",{className:"mb-1"},i.a.createElement("span",{className:"font-weight-bold"},"\u0421\u0442\u0430\u0442\u0443\u0441")," -"," ",t.status),i.a.createElement("p",{className:"mb-1"},i.a.createElement("span",{className:"font-weight-bold"},"\u0414\u0430\u0442\u0430 \u0432\u044b\u0445\u043e\u0434\u0430")," -"," ",t.release_date),i.a.createElement("p",{className:"mb-1"},i.a.createElement("span",{className:"font-weight-bold"},"\u0416\u0430\u043d\u0440\u044b")," -"," ",Me(t.genres).join(", ")),i.a.createElement("p",{className:"mb-1"},i.a.createElement("span",{className:"font-weight-bold"},"\u042f\u0437\u044b\u043a \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b\u0430")," -"," ",t.original_language),i.a.createElement("p",{className:"mb-1"},i.a.createElement("span",{className:"font-weight-bold"},"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f")," -"," ",Me(t.production_companies).join(", ")),i.a.createElement("p",{className:"mb-3"},i.a.createElement("span",{className:"font-weight-bold"},"\u0421\u0442\u0440\u0430\u043d\u0430")," -"," ",Me(t.production_countries).join(", ")),i.a.createElement("h4",{className:"mb-1"},"\u041e\u0431\u0437\u043e\u0440"),i.a.createElement("p",{className:"text-max-5-line mb-0"},t.overview))))))))},Ue=function(e){Object(h.a)(a,e);var t=Object(_.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).state={videos:[],images:[]},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.movie_id;k.get("/movie/".concat(t,"/videos"),{params:{language:"ru-RU",append_to_response:"videos"}}).then((function(a){a.results.length>0?e.setState((function(){return{videos:a.results}})):k.get("/movie/".concat(t,"/videos"),{params:{language:"en-US",append_to_response:"videos"}}).then((function(t){e.setState((function(){return{videos:t.results}}))}))})),k.get("/movie/".concat(t,"/images"),{params:{include_image_language:"ru,en"}}).then((function(t){e.setState((function(){return{images:t.posters}}))}))}},{key:"render",value:function(){var e=this.state,t=e.videos,a=e.images;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"videos mt-3 mb-3"},i.a.createElement("div",{className:"horizontal-scroll d-flex "},t.map((function(e){return i.a.createElement("div",{key:e.id,className:"videos__item mr-2"},i.a.createElement("h5",{className:"mb-2 text-max-1-line"},e.name),i.a.createElement("iframe",{title:e.name,width:"550",height:"315",src:"https://www.youtube.com/embed/".concat(e.key),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}))})))),i.a.createElement("div",{className:"images mb-4"},i.a.createElement("h3",{className:"mb-2 mt-2"},"\u0413\u0430\u043b\u0435\u0440\u0435\u044f"),i.a.createElement("div",{className:"d-flex horizontal-scroll"},a.map((function(e){return i.a.createElement("div",{className:"images__item mr-2",key:e.file_path},i.a.createElement("img",{src:"".concat(j).concat(e.file_path),width:"210",height:"300",alt:""}))})))))}}]),a}(i.a.Component),Re=function(e){Object(h.a)(a,e);var t=Object(_.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).state={actors:[]},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.movie_id;k.get("/movie/".concat(t,"/credits"),{params:{language:"ru"}}).then((function(t){e.setState((function(){return{actors:t.cast}}))}))}},{key:"render",value:function(){return i.a.createElement("div",{className:"actors mt-2 mb-4 d-flex justify-content-between horizontal-scroll"},this.state.actors.map((function(e){return i.a.createElement("div",{className:"actors__item mr-2",key:e.id},i.a.createElement("img",{src:e.profile_path?"".concat(j).concat(e.profile_path):"/kinopoisk/images/not-foundPoster.png",width:"240",alt:""}),i.a.createElement("div",{className:"actors__description d-flex align-items-center justify-content-center flex-column"},i.a.createElement("h5",{className:"mb-1"},e.name),i.a.createElement("p",{className:"mb-0 text-max-1-line text-center pl-1 pr-1"},"\u0420\u043e\u043b\u044c - ",e.character)))})))}}]),a}(i.a.Component),Pe=J(function(e){Object(h.a)(a,e);var t=Object(_.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).state={movie:{}},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this;k.get("/movie/".concat(this.props.match.params.id),{params:{language:"ru-RU"}}).then((function(t){return e.setState((function(){return{movie:t}}))}))}},{key:"render",value:function(){var e=this.state,t=e.movie,a=e.activeTab,n=this.props.match;return i.a.createElement("div",{className:"movie-page"},i.a.createElement(Te,Object.assign({},this.props,{movie:t})),i.a.createElement("div",{className:"movie-tabs w-100"},i.a.createElement("div",{className:"container"},i.a.createElement(Ce.a,{tabs:!0},i.a.createElement(ke.a,{className:"cursor-pointer"},i.a.createElement("p",{className:"mb-0 mr-1 mt-1 movie-tabs__item"},i.a.createElement(u.c,{className:"p-2 pl-3 pr-3 movie-tabs__link-tab d-block",to:"".concat(n.url,"/media/"),activeClassName:"active"},"\u041c\u0435\u0434\u0438\u0430"))),i.a.createElement(ke.a,{className:"cursor-pointer"},i.a.createElement("p",{className:"mb-0 mr-1 mt-1 movie-tabs__item"},i.a.createElement(u.c,{className:"p-2 pl-3 pr-3 movie-tabs__link-tab d-block",to:"".concat(n.url,"/actors/"),activeClassName:"active"},"\u0410\u043a\u0442\u0435\u0440\u044b")))),i.a.createElement(Ae.a,{activeTab:a},i.a.createElement(d.c,null,i.a.createElement(d.a,{path:"".concat(n.url,"/media/"),render:function(){return i.a.createElement(Ue,{movie_id:n.params.id})}}),i.a.createElement(d.a,{path:"".concat(n.url,"/actors/"),render:function(){return i.a.createElement(Re,{movie_id:n.params.id})}}))))))}}]),a}(i.a.Component)),Ie=a(104),xe=a(105),Le=a(106),He=a(107),Ge=J((function(e){var t=function(e,t){var a=!1;return e.forEach((function(e){e.id===t.id&&(a=!0)})),a},a=e.auth,n=e.moviesActions,r=e.movies;return i.a.createElement("div",{className:"favourite-movies-tab"},i.a.createElement("div",{className:"favourite-movies"},r.favouriteMovies.map((function(r){var s="".concat(r.release_date.substr(8,2)," ").concat(function(e){return ge.filter((function(t){return t.month===e.release_date.substr(5,2)}))}(r)[0].shortName," ").concat(r.release_date.substr(0,4));return i.a.createElement("div",{className:"favourite-movies__item",key:r.id},i.a.createElement("div",{className:"poster-img"},i.a.createElement("img",{src:"https://image.tmdb.org/t/p/w500".concat(r.poster_path),alt:"",className:"poster-img__image"})),i.a.createElement("div",{className:"description"},i.a.createElement("div",{className:"description__top-block"},i.a.createElement("div",{className:"rate"},1===String(r.vote_average).length?"".concat(r.vote_average,".0"):r.vote_average),i.a.createElement("div",{className:"title"},i.a.createElement("p",{className:"movie-name"},i.a.createElement(u.b,{to:"/movie/".concat(r.id,"/media/")},r.title)),i.a.createElement("p",{className:"release-date"},s))),i.a.createElement("div",{className:"description__middle-block"},i.a.createElement("div",{className:"movie-overview"},i.a.createElement("p",{className:"text"},r.overview))),i.a.createElement("div",{className:"description__bottom-block"},i.a.createElement("div",{className:"favourite cursor-pointer",onClick:function(){n.updateFavouriteMovies({account_id:a.account_id,session_id:a.session_id,media_id:r.id})}},i.a.createElement("div",{className:"icon"},t(e.movies.favouriteMovies,r)?i.a.createElement(ve.a,null):i.a.createElement(he.a,null)),i.a.createElement("span",{className:"settings-title"},"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435")),i.a.createElement("div",{className:"watchlist cursor-pointer",onClick:function(){n.updateWatchlist({account_id:a.account_id,session_id:a.session_id,media_id:r.id})}},i.a.createElement("div",{className:"icon"},t(e.movies.watchlist,r)?i.a.createElement(_e.a,null):i.a.createElement(fe.a,null)),i.a.createElement("span",{className:"settings-title"},"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c")))))}))))})),De=J((function(e){var t=function(e,t){var a=!1;return e.forEach((function(e){e.id===t.id&&(a=!0)})),a},a=e.auth,n=e.moviesActions,r=e.movies;return i.a.createElement("div",{className:"favourite-movies-tab"},i.a.createElement("div",{className:"favourite-movies"},r.watchlist.map((function(r){var s="".concat(r.release_date.substr(8,2)," ").concat(function(e){return ge.filter((function(t){return t.month===e.release_date.substr(5,2)}))}(r)[0].shortName," ").concat(r.release_date.substr(0,4));return i.a.createElement("div",{className:"favourite-movies__item",key:r.id},i.a.createElement("div",{className:"poster-img"},i.a.createElement("img",{src:"https://image.tmdb.org/t/p/w500".concat(r.poster_path),alt:"",className:"poster-img__image"})),i.a.createElement("div",{className:"description"},i.a.createElement("div",{className:"description__top-block"},i.a.createElement("div",{className:"rate"},1===String(r.vote_average).length?"".concat(r.vote_average,".0"):r.vote_average),i.a.createElement("div",{className:"title"},i.a.createElement("p",{className:"movie-name"},i.a.createElement(u.b,{to:"/movie/".concat(r.id,"/media/")},r.title)),i.a.createElement("p",{className:"release-date"},s))),i.a.createElement("div",{className:"description__middle-block"},i.a.createElement("div",{className:"movie-overview"},i.a.createElement("p",{className:"text"},r.overview))),i.a.createElement("div",{className:"description__bottom-block"},i.a.createElement("div",{className:"favourite cursor-pointer",onClick:function(){n.updateFavouriteMovies({account_id:a.account_id,session_id:a.session_id,media_id:r.id})}},i.a.createElement("div",{className:"icon"},t(e.movies.favouriteMovies,r)?i.a.createElement(ve.a,null):i.a.createElement(he.a,null)),i.a.createElement("span",{className:"settings-title"},"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435")),i.a.createElement("div",{className:"watchlist cursor-pointer",onClick:function(){n.updateWatchlist({account_id:a.account_id,session_id:a.session_id,media_id:r.id})}},i.a.createElement("div",{className:"icon"},t(e.movies.watchlist,r)?i.a.createElement(_e.a,null):i.a.createElement(fe.a,null)),i.a.createElement("span",{className:"settings-title"},"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c")))))}))))})),We=J(function(e){Object(h.a)(a,e);var t=Object(_.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).state={activeTab:"1"},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.props.authActions.toggleUserModal(!1)}},{key:"render",value:function(){var e=this,t=this.props,a=t.auth,n=t.movies,r=function(t){e.state.activeTab!==t&&e.setState((function(){return{activeTab:t}}))},s=this.state.activeTab;return i.a.createElement("div",{className:"user-page"},i.a.createElement("div",{className:"user-page__header"},i.a.createElement("div",{className:"bg-image"},i.a.createElement("img",{className:"image",src:"/kinopoisk/images/user-page.png",alt:""})),i.a.createElement("div",{className:"inner-content"},i.a.createElement("div",{className:"content container"},i.a.createElement("img",{src:"https://image.tmdb.org/t/p/w500".concat(a.user.avatar.tmdb.avatar_path),alt:"",className:"user-img"}),i.a.createElement("div",{className:"user-data"},i.a.createElement("h2",{className:"user-data__name"},a.user.name),i.a.createElement("p",{className:"user-data__nickname"},a.user.username))))),i.a.createElement("div",{className:"container"},i.a.createElement(Ce.a,{tabs:!0},i.a.createElement(ke.a,{className:"cursor-pointer"},i.a.createElement(Ie.a,{className:M()({active:"1"===s}),onClick:function(){r("1")}},"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u044b\u0435")),i.a.createElement(ke.a,{className:"cursor-pointer"},i.a.createElement(Ie.a,{className:M()({active:"2"===s}),onClick:function(){r("2")}},"\u0421\u043f\u0438\u0441\u043e\u043a \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u043d\u0438\u044f"))),i.a.createElement(Ae.a,{activeTab:s},i.a.createElement(xe.a,{tabId:"1"},i.a.createElement(Le.a,null,i.a.createElement(He.a,{sm:"12"},n.favouriteMovies.length>0?i.a.createElement(Ge,null):i.a.createElement("p",{className:"mt-4"},"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u0444\u0438\u043b\u044c\u043c\u043e\u0432...")))),i.a.createElement(xe.a,{tabId:"2"},i.a.createElement(Le.a,null,i.a.createElement(He.a,{sm:"12"},n.watchlist.length>0?i.a.createElement(De,null):i.a.createElement("p",{className:"mt-4"},"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u0444\u0438\u043b\u044c\u043c\u043e\u0432 \u0434\u043b\u044f \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430...")))))))}}]),a}(i.a.Component)),Ve=function(){var e=Object(m.d)((function(e){return e.auth.session_id})),t=Object(m.d)((function(e){return e.auth.account_id})),a=Object(m.c)();return Object(o.useEffect)((function(){e&&(a(S(e)),a(I(e,t)),a(x(e,t)))}),[]),i.a.createElement(u.a,{basename:"/kinopoisk/"},i.a.createElement("div",{className:"header"},i.a.createElement(ee,null)),i.a.createElement(d.a,{exact:!0,path:"/",component:we}),i.a.createElement(d.a,{path:"/profile/:id",component:We}),i.a.createElement(d.a,{path:"/movie/:id",component:Pe}),i.a.createElement("div",{className:"footer"}))},Be=(a(82),a(47)),qe=a(48),ze=new Q.a,Je={user:null,session_id:ze.get("session_id"),account_id:ze.get("account_id"),isAuth:!1,showUserModal:!1,showAuthFormModal:!1};var Qe={favouriteMovies:[],watchlist:[]};var Ye={sort_by:"popularity.desc",primary_release_year:(new Date).getFullYear(),with_genres:[],page:1,total_pages:500};var Ke=Object(F.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_AUTH":return Object(b.a)(Object(b.a)({},e),{},{user:t.payload.user,session_id:t.payload.session_id,account_id:t.payload.user.id,isAuth:!0,showUserModal:!1,showAuthFormModal:!1});case"LOGOUT":return Object(b.a)(Object(b.a)({},e),{},{user:null,session_id:null,account_id:null,isAuth:!1,showUserModal:!1,showAuthFormModal:!1});case"TOGGLE_USER_MODAL":return Object(b.a)(Object(b.a)({},e),{},{showUserModal:t.payload});case"TOGGLE_AUTH_FORM_MODAL":return Object(b.a)(Object(b.a)({},e),{},{showAuthFormModal:t.payload});default:return e}},movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_SUCCESS_FAVOURITE_MOVIES":return Object(b.a)(Object(b.a)({},e),{},{favouriteMovies:t.payload.results});case"FETCH_SUCCESS_WATCHLIST":return Object(b.a)(Object(b.a)({},e),{},{watchlist:t.payload.results});case"UPDATE_SUCCESS_FAVOURITE_MOVIES":return Object(b.a)(Object(b.a)({},e),{},{favouriteMovies:t.payload.results});case"UPDATE_SUCCESS_WATCHLIST":return Object(b.a)(Object(b.a)({},e),{},{watchlist:t.payload.results});case"CLEAR_FAVOURITE_MOVIES_AND_WATCHLIST":return Object(b.a)(Object(b.a)({},e),{},{favouriteMovies:[],watchlist:[]});default:return e}},filters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ONCHANGE_FILTERS":return Object(b.a)(Object(b.a)({},e),{},Object(E.a)({},t.payload.name,t.payload.value));case"ONCHANGE_PAGE":return Object(b.a)(Object(b.a)({},e),{},{page:t.payload});case"ONCHANGE_TOTAL_PAGES":return Object(b.a)(Object(b.a)({},e),{},{total_pages:t.payload});case"RESET_FILTERS":return Ye;default:return e}}}),Xe=Object(F.createStore)(Ke,Object(qe.composeWithDevTools)(Object(F.applyMiddleware)(Be.a,(function(){return function(e){return function(t){return"UPDATE_AUTH"===t.type&&ze.set("session_id",t.payload.session_id,{path:"/kinopoisk/",maxAge:2592e3}),"LOGOUT"===t.type&&ze.remove("session_id",{path:"/kinopoisk/"}),e(t)}}}))));l.a.render(i.a.createElement(m.a,{store:Xe},i.a.createElement(Ve,null)),document.getElementById("kinopoisk"))}},[[51,1,2]]]);
//# sourceMappingURL=main.2059de8c.chunk.js.map